<app-navbar></app-navbar>
<div class="profile-container">

  <!-- Profile Info Card -->
  <mat-card class="profile-card">
    <div class="profile-header">
      <!-- Avatar Section -->
      <div class="avatar-section">
        @if (profileUser()?.profileImgUrl) {
        <img [src]="profileUser()?.profileImgUrl" [alt]="profileUser()?.username" class="profile-avatar">
        } @else {
        <div class="default-avatar">
          <mat-icon>account_circle</mat-icon>
        </div>
        }
      </div>

      <!-- Profile Info Section -->
      <div class="profile-info">
        <div class="profile-name-section">
          <h1 class="profile-name">{{ profileUser()?.firstName }} {{ profileUser()?.lastName }}</h1>
          <span class="profile-username">&#64;{{ profileUser()?.username }}</span>
        </div>

        <!-- Bio Section -->
        @if (profileUser()?.bio) {
        <p class="profile-bio">{{ profileUser()?.bio }}</p>
        }

        <!-- Stats Section -->
        <div class="profile-stats">
          <div class="stat-item">
            <span class="stat-value">{{ postsCount() }}</span>
            <span class="stat-label">Posts</span>
          </div>
          <mat-divider [vertical]="true"></mat-divider>
          <div class="stat-item">
            <span class="stat-value">{{ followersCount() }}</span>
            <span class="stat-label">Followers</span>
          </div>
          <mat-divider [vertical]="true"></mat-divider>
          <div class="stat-item">
            <span class="stat-value">{{ followingCount() }}</span>
            <span class="stat-label">Following</span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="profile-actions">
          @if (isOwnProfile()) {
          <button mat-flat-button color="primary" (click)="onEditProfile()" class="action-btn">
            <mat-icon>edit</mat-icon>
            Edit Profile
          </button>
          } @else {
          <button mat-flat-button [color]="isFollowing() ? 'accent' : 'primary'" (click)="onFollowToggle()"
            class="action-btn">
            <mat-icon>{{ isFollowing() ? 'person_remove' : 'person_add' }}</mat-icon>
            {{ isFollowing() ? 'Unfollow' : 'Follow' }}
          </button>
          }
        </div>
      </div>
    </div>
  </mat-card>

  <div class="content-card">
    @if (isEditing() && isOwnProfile()) {
    <app-profile-edit (editCompleted)="onEditComplet($event)"></app-profile-edit>
    } @else {
      <h1>posts</h1>
    }
  </div>
</div>